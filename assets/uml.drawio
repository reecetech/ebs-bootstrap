<mxfile host="app.diagrams.net" modified="2023-12-04T04:14:40.179Z" agent="Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/119.0.0.0 Safari/537.36" etag="OxhLZQ3sOw9_QWtqeSuU" version="22.1.5" type="device">
  <diagram name="Page-1" id="nO5UN221PRGTsYIZ8Ytu">
    <mxGraphModel dx="2049" dy="1139" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="850" pageHeight="1100" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="G81cnE-LIEM_Ek7taha4-13" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="G81cnE-LIEM_Ek7taha4-1" target="G81cnE-LIEM_Ek7taha4-6">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="G81cnE-LIEM_Ek7taha4-1" value="" style="shape=parallelogram;perimeter=parallelogramPerimeter;whiteSpace=wrap;html=1;fixedSize=1;" vertex="1" parent="1">
          <mxGeometry x="90" y="220" width="120" height="20" as="geometry" />
        </mxCell>
        <mxCell id="G81cnE-LIEM_Ek7taha4-4" value="Format" style="shape=parallelogram;perimeter=parallelogramPerimeter;whiteSpace=wrap;html=1;fixedSize=1;" vertex="1" parent="1">
          <mxGeometry x="90" y="210" width="120" height="20" as="geometry" />
        </mxCell>
        <mxCell id="G81cnE-LIEM_Ek7taha4-6" value="Change Owner" style="shape=parallelogram;perimeter=parallelogramPerimeter;whiteSpace=wrap;html=1;fixedSize=1;" vertex="1" parent="1">
          <mxGeometry x="90" y="260" width="120" height="20" as="geometry" />
        </mxCell>
        <mxCell id="G81cnE-LIEM_Ek7taha4-8" value="&lt;h1&gt;Layer Architecture&lt;/h1&gt;&lt;p&gt;In this version of this program we migrate to an architecture that treats a block device as a series of interconnected layers. This view was inspired by the fact that certain operations could only be performed on a block device unless the device was formatted or mounted. This program will iterate through each device, &lt;b&gt;layer by layer&lt;/b&gt;, until it brings a block device to its desired state&lt;/p&gt;" style="text;html=1;strokeColor=none;fillColor=none;spacing=5;spacingTop=-20;whiteSpace=wrap;overflow=hidden;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="40" y="40" width="320" height="160" as="geometry" />
        </mxCell>
        <mxCell id="G81cnE-LIEM_Ek7taha4-10" value="" style="verticalLabelPosition=bottom;html=1;verticalAlign=top;align=center;strokeColor=none;fillColor=#00BEF2;shape=mxgraph.azure.vhd_data_disk;pointerEvents=1;" vertex="1" parent="1">
          <mxGeometry x="235" y="220" width="37.5" height="50" as="geometry" />
        </mxCell>
        <mxCell id="G81cnE-LIEM_Ek7taha4-111" style="rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=1;exitDx=0;exitDy=0;entryX=0;entryY=0;entryDx=0;entryDy=0;endArrow=open;endFill=0;" edge="1" parent="1" source="G81cnE-LIEM_Ek7taha4-15" target="G81cnE-LIEM_Ek7taha4-98">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="G81cnE-LIEM_Ek7taha4-15" value="Config" style="swimlane;fontStyle=0;childLayout=stackLayout;horizontal=1;startSize=30;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;whiteSpace=wrap;html=1;fillColor=#FFFFFF;" vertex="1" parent="1">
          <mxGeometry x="440" y="245" width="160" height="70" as="geometry" />
        </mxCell>
        <mxCell id="G81cnE-LIEM_Ek7taha4-16" value="GetMode(device: string): Mode" style="text;strokeColor=none;fillColor=#FFFFFF;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" vertex="1" parent="G81cnE-LIEM_Ek7taha4-15">
          <mxGeometry y="30" width="160" height="40" as="geometry" />
        </mxCell>
        <mxCell id="G81cnE-LIEM_Ek7taha4-87" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;dashed=1;endArrow=open;endFill=0;" edge="1" parent="1" source="G81cnE-LIEM_Ek7taha4-19" target="G81cnE-LIEM_Ek7taha4-15">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="G81cnE-LIEM_Ek7taha4-103" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;endArrow=open;endFill=0;" edge="1" parent="1" source="G81cnE-LIEM_Ek7taha4-19" target="G81cnE-LIEM_Ek7taha4-57">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="1151.3333333333333" y="240" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="G81cnE-LIEM_Ek7taha4-19" value="Validator" style="swimlane;fontStyle=0;childLayout=stackLayout;horizontal=1;startSize=30;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;whiteSpace=wrap;html=1;fillColor=#FFFFFF;" vertex="1" parent="1">
          <mxGeometry x="450" y="130" width="140" height="60" as="geometry" />
        </mxCell>
        <mxCell id="G81cnE-LIEM_Ek7taha4-20" value="Validate(c: Config): bool" style="text;strokeColor=none;fillColor=#FFFFFF;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" vertex="1" parent="G81cnE-LIEM_Ek7taha4-19">
          <mxGeometry y="30" width="140" height="30" as="geometry" />
        </mxCell>
        <mxCell id="G81cnE-LIEM_Ek7taha4-124" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;endArrow=open;endFill=0;" edge="1" parent="1" source="G81cnE-LIEM_Ek7taha4-21" target="G81cnE-LIEM_Ek7taha4-57">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="630" y="410" />
              <mxPoint x="630" y="560" />
              <mxPoint x="1140" y="560" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="G81cnE-LIEM_Ek7taha4-21" value="Modifier" style="swimlane;fontStyle=0;childLayout=stackLayout;horizontal=1;startSize=30;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;whiteSpace=wrap;html=1;fillColor=#FFFFFF;" vertex="1" parent="1">
          <mxGeometry x="450" y="380" width="140" height="60" as="geometry" />
        </mxCell>
        <mxCell id="G81cnE-LIEM_Ek7taha4-22" value="Modify(c: Config): bool" style="text;strokeColor=none;fillColor=#FFFFFF;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" vertex="1" parent="G81cnE-LIEM_Ek7taha4-21">
          <mxGeometry y="30" width="140" height="30" as="geometry" />
        </mxCell>
        <mxCell id="G81cnE-LIEM_Ek7taha4-27" value="AwsNitroNVMeModifier" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#FFFFFF;" vertex="1" parent="1">
          <mxGeometry x="450" y="470" width="140" height="30" as="geometry" />
        </mxCell>
        <mxCell id="G81cnE-LIEM_Ek7taha4-81" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;endArrow=block;endFill=0;" edge="1" parent="1" source="G81cnE-LIEM_Ek7taha4-30" target="G81cnE-LIEM_Ek7taha4-19">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="G81cnE-LIEM_Ek7taha4-31" value="Layer" style="swimlane;fontStyle=0;childLayout=stackLayout;horizontal=1;startSize=30;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="660" y="230" width="140" height="120" as="geometry">
            <mxRectangle x="540" y="450" width="70" height="30" as="alternateBounds" />
          </mxGeometry>
        </mxCell>
        <mxCell id="G81cnE-LIEM_Ek7taha4-32" value="From(c: Config): error" style="text;strokeColor=none;fillColor=#FFFFFF;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" vertex="1" parent="G81cnE-LIEM_Ek7taha4-31">
          <mxGeometry y="30" width="140" height="30" as="geometry" />
        </mxCell>
        <mxCell id="G81cnE-LIEM_Ek7taha4-39" value="Modify(c: Config): ([]Action, error)" style="text;strokeColor=none;fillColor=#FFFFFF;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" vertex="1" parent="G81cnE-LIEM_Ek7taha4-31">
          <mxGeometry y="60" width="140" height="30" as="geometry" />
        </mxCell>
        <mxCell id="G81cnE-LIEM_Ek7taha4-40" value="Validate(c: Config): error" style="text;strokeColor=none;fillColor=#FFFFFF;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" vertex="1" parent="G81cnE-LIEM_Ek7taha4-31">
          <mxGeometry y="90" width="140" height="30" as="geometry" />
        </mxCell>
        <mxCell id="G81cnE-LIEM_Ek7taha4-112" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;dashed=1;endArrow=open;endFill=0;" edge="1" parent="1" source="G81cnE-LIEM_Ek7taha4-50" target="G81cnE-LIEM_Ek7taha4-64">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="G81cnE-LIEM_Ek7taha4-115" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;endArrow=diamond;endFill=0;" edge="1" parent="1" source="G81cnE-LIEM_Ek7taha4-50" target="G81cnE-LIEM_Ek7taha4-31">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="G81cnE-LIEM_Ek7taha4-50" value="Backend" style="swimlane;fontStyle=0;childLayout=stackLayout;horizontal=1;startSize=30;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="860" y="245" width="140" height="90" as="geometry">
            <mxRectangle x="540" y="450" width="70" height="30" as="alternateBounds" />
          </mxGeometry>
        </mxCell>
        <mxCell id="G81cnE-LIEM_Ek7taha4-51" value="From(c: Config): error" style="text;strokeColor=none;fillColor=#FFFFFF;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" vertex="1" parent="G81cnE-LIEM_Ek7taha4-50">
          <mxGeometry y="30" width="140" height="30" as="geometry" />
        </mxCell>
        <mxCell id="G81cnE-LIEM_Ek7taha4-52" value="Modify(...): Action" style="text;strokeColor=none;fillColor=#FFFFFF;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" vertex="1" parent="G81cnE-LIEM_Ek7taha4-50">
          <mxGeometry y="60" width="140" height="30" as="geometry" />
        </mxCell>
        <mxCell id="G81cnE-LIEM_Ek7taha4-117" value="" style="rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;shape=flexArrow;startArrow=block;endArrow=block;endFill=0;startFill=0;endSize=3.6591836734693874;startSize=3.6591836734693874;startWidth=11.50326797385621;endWidth=11.50326797385621;width=6.122448979591836;" edge="1" parent="1" source="G81cnE-LIEM_Ek7taha4-57" target="G81cnE-LIEM_Ek7taha4-116">
          <mxGeometry x="-0.0074" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="G81cnE-LIEM_Ek7taha4-139" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;dashed=1;endArrow=open;endFill=0;" edge="1" parent="1" source="G81cnE-LIEM_Ek7taha4-57" target="G81cnE-LIEM_Ek7taha4-136">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1160" y="420" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="G81cnE-LIEM_Ek7taha4-143" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;dashed=1;endArrow=open;endFill=0;" edge="1" parent="1" source="G81cnE-LIEM_Ek7taha4-57" target="G81cnE-LIEM_Ek7taha4-140">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1180" y="355" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="G81cnE-LIEM_Ek7taha4-57" value="Service" style="swimlane;fontStyle=0;childLayout=stackLayout;horizontal=1;startSize=30;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="1060" y="245" width="140" height="90" as="geometry">
            <mxRectangle x="540" y="450" width="70" height="30" as="alternateBounds" />
          </mxGeometry>
        </mxCell>
        <mxCell id="G81cnE-LIEM_Ek7taha4-58" value="Get(...): error" style="text;strokeColor=none;fillColor=#FFFFFF;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" vertex="1" parent="G81cnE-LIEM_Ek7taha4-57">
          <mxGeometry y="30" width="140" height="30" as="geometry" />
        </mxCell>
        <mxCell id="G81cnE-LIEM_Ek7taha4-61" value="Set(...): error" style="text;strokeColor=none;fillColor=#FFFFFF;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" vertex="1" parent="G81cnE-LIEM_Ek7taha4-57">
          <mxGeometry y="60" width="140" height="30" as="geometry" />
        </mxCell>
        <mxCell id="G81cnE-LIEM_Ek7taha4-64" value="Action" style="swimlane;fontStyle=0;childLayout=stackLayout;horizontal=1;startSize=30;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="860" y="370" width="140" height="120" as="geometry">
            <mxRectangle x="540" y="450" width="70" height="30" as="alternateBounds" />
          </mxGeometry>
        </mxCell>
        <mxCell id="G81cnE-LIEM_Ek7taha4-65" value="Execute(): error" style="text;strokeColor=none;fillColor=#FFFFFF;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" vertex="1" parent="G81cnE-LIEM_Ek7taha4-64">
          <mxGeometry y="30" width="140" height="30" as="geometry" />
        </mxCell>
        <mxCell id="G81cnE-LIEM_Ek7taha4-76" value="GetMode(): Mode" style="text;strokeColor=none;fillColor=#FFFFFF;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" vertex="1" parent="G81cnE-LIEM_Ek7taha4-64">
          <mxGeometry y="60" width="140" height="30" as="geometry" />
        </mxCell>
        <mxCell id="G81cnE-LIEM_Ek7taha4-66" value="SetMode(): Action" style="text;strokeColor=none;fillColor=#FFFFFF;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" vertex="1" parent="G81cnE-LIEM_Ek7taha4-64">
          <mxGeometry y="90" width="140" height="30" as="geometry" />
        </mxCell>
        <mxCell id="G81cnE-LIEM_Ek7taha4-84" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=1;entryDx=0;entryDy=0;entryPerimeter=0;endArrow=block;endFill=0;" edge="1" parent="1" source="G81cnE-LIEM_Ek7taha4-27" target="G81cnE-LIEM_Ek7taha4-22">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="G81cnE-LIEM_Ek7taha4-86" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=0;exitDx=0;exitDy=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;endArrow=open;endFill=0;dashed=1;" edge="1" parent="1" source="G81cnE-LIEM_Ek7taha4-21" target="G81cnE-LIEM_Ek7taha4-15">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="520" y="340" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="G81cnE-LIEM_Ek7taha4-90" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=1.002;entryY=0.371;entryDx=0;entryDy=0;entryPerimeter=0;endArrow=open;endFill=0;dashed=1;" edge="1" parent="1" source="G81cnE-LIEM_Ek7taha4-31" target="G81cnE-LIEM_Ek7taha4-16">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="G81cnE-LIEM_Ek7taha4-104" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;endArrow=open;endFill=0;" edge="1" parent="1" source="G81cnE-LIEM_Ek7taha4-51" target="G81cnE-LIEM_Ek7taha4-57">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="G81cnE-LIEM_Ek7taha4-108" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.989;entryY=0.401;entryDx=0;entryDy=0;entryPerimeter=0;endArrow=open;endFill=0;" edge="1" parent="1" source="G81cnE-LIEM_Ek7taha4-64" target="G81cnE-LIEM_Ek7taha4-98">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="G81cnE-LIEM_Ek7taha4-114" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;endArrow=open;endFill=0;" edge="1" parent="1" source="G81cnE-LIEM_Ek7taha4-64">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="990" y="445" as="sourcePoint" />
            <mxPoint x="1120" y="335" as="targetPoint" />
            <Array as="points">
              <mxPoint x="1120" y="445" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="G81cnE-LIEM_Ek7taha4-116" value="" style="image;aspect=fixed;perimeter=ellipsePerimeter;html=1;align=center;shadow=0;dashed=0;spacingTop=3;image=img/lib/active_directory/database_server.svg;" vertex="1" parent="1">
          <mxGeometry x="1250" y="170" width="41" height="50" as="geometry" />
        </mxCell>
        <mxCell id="G81cnE-LIEM_Ek7taha4-120" value="" style="group" vertex="1" connectable="0" parent="1">
          <mxGeometry x="670" y="370" width="120" height="150" as="geometry" />
        </mxCell>
        <mxCell id="G81cnE-LIEM_Ek7taha4-98" value="" style="rounded=0;whiteSpace=wrap;html=1;dashed=1;fillColor=none;" vertex="1" parent="G81cnE-LIEM_Ek7taha4-120">
          <mxGeometry width="120" height="150" as="geometry" />
        </mxCell>
        <mxCell id="G81cnE-LIEM_Ek7taha4-95" value="Healthcheck" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="G81cnE-LIEM_Ek7taha4-120">
          <mxGeometry x="10" y="30" width="100" height="30" as="geometry" />
        </mxCell>
        <mxCell id="G81cnE-LIEM_Ek7taha4-96" value="Prompt" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="G81cnE-LIEM_Ek7taha4-120">
          <mxGeometry x="10" y="70" width="100" height="30" as="geometry" />
        </mxCell>
        <mxCell id="G81cnE-LIEM_Ek7taha4-97" value="Prompt" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="G81cnE-LIEM_Ek7taha4-120">
          <mxGeometry x="10" y="110" width="100" height="30" as="geometry" />
        </mxCell>
        <mxCell id="G81cnE-LIEM_Ek7taha4-99" value="Mode" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="G81cnE-LIEM_Ek7taha4-120">
          <mxGeometry x="30" width="60" height="30" as="geometry" />
        </mxCell>
        <mxCell id="G81cnE-LIEM_Ek7taha4-121" value="" style="group" vertex="1" connectable="0" parent="1">
          <mxGeometry x="430" y="50" width="160" height="50" as="geometry" />
        </mxCell>
        <mxCell id="G81cnE-LIEM_Ek7taha4-29" value="" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#FFFFFF;" vertex="1" parent="G81cnE-LIEM_Ek7taha4-121">
          <mxGeometry width="140" height="30" as="geometry" />
        </mxCell>
        <mxCell id="G81cnE-LIEM_Ek7taha4-28" value="" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#FFFFFF;" vertex="1" parent="G81cnE-LIEM_Ek7taha4-121">
          <mxGeometry x="10" y="10" width="140" height="30" as="geometry" />
        </mxCell>
        <mxCell id="G81cnE-LIEM_Ek7taha4-30" value="OwnerValidator" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#FFFFFF;" vertex="1" parent="G81cnE-LIEM_Ek7taha4-121">
          <mxGeometry x="20" y="20" width="140" height="30" as="geometry" />
        </mxCell>
        <mxCell id="G81cnE-LIEM_Ek7taha4-126" value="&lt;h2&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;Validator&lt;/font&gt;&lt;/h2&gt;&lt;div&gt;Responsible for ensuring that the Config only contains data that is sensible with regards to the system. For example, OwnerValidator will ensure that any users or groups, mentioned in the Config, actually exist on the system.&lt;/div&gt;" style="text;html=1;strokeColor=none;fillColor=none;spacing=5;spacingTop=-20;whiteSpace=wrap;overflow=hidden;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="40" y="458" width="320" height="122" as="geometry" />
        </mxCell>
        <mxCell id="G81cnE-LIEM_Ek7taha4-127" value="&lt;h2&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;Config&lt;/font&gt;&lt;/h2&gt;&lt;div&gt;Responsible for storing the desired state of devices on the system and the execution mode for a specific device&lt;/div&gt;" style="text;html=1;strokeColor=none;fillColor=none;spacing=5;spacingTop=-20;whiteSpace=wrap;overflow=hidden;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="40" y="350" width="320" height="90" as="geometry" />
        </mxCell>
        <UserObject label="&lt;h1&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;Modifier&lt;/span&gt;&lt;/h1&gt;&lt;div&gt;While it would be ideal that the Config is immutable, there are certain conditions that require us to perform modifications to the configuration declared on file.&lt;/div&gt;&lt;h3&gt;AwsNitroNVMeModifier&lt;/h3&gt;&lt;div&gt;The limitation of the NVMe Driver on Nitro-enabled EC2 Instances is that they rename attached block devices on a FIFO basis. This would mean that a EBS volume attached through the API as /dev/sdb could get potentially renamed to /dev/nvme0n[0-9]+.&amp;nbsp;&lt;br&gt;&lt;br&gt;Fortunately, AWS provides us a mechanism to recover the original block device mapping by querying the NVMe IOCTL interface [&lt;a href=&quot;https://github.com/amazonlinux/amazon-ec2-utils/blob/main/ebsnvme-id&quot;&gt;Reference&lt;/a&gt;]&lt;/div&gt;&lt;div&gt;&lt;br&gt;The aim of this modifier is to replace any references to recovered block device mapping (/dev/sdb) with the actual block device name (/dev/nvme0n[0-9]+)&lt;/div&gt;&lt;br&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;" link="https://github.com/amazonlinux/amazon-ec2-utils/blob/main/ebsnvme-id" linkTarget="_blank" id="G81cnE-LIEM_Ek7taha4-128">
          <mxCell style="text;html=1;strokeColor=none;fillColor=none;spacing=5;spacingTop=-20;whiteSpace=wrap;overflow=hidden;rounded=0;" vertex="1" parent="1">
            <mxGeometry x="40" y="600" width="320" height="350" as="geometry" />
          </mxCell>
        </UserObject>
        <mxCell id="G81cnE-LIEM_Ek7taha4-130" value="&lt;h2&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;Layer&lt;/font&gt;&lt;/h2&gt;&lt;div&gt;Layers traverse through three phases&lt;/div&gt;&lt;h4&gt;Enrich (From)&lt;/h4&gt;&lt;div&gt;In this phase, we enrich the layer with information from the various backends it might orchestrate. Some layers might require information from multiple backends to achieve the desired goal of getting a block device to a specific state.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;The purpose of this phase is to generate an in-memory representation of a sub-section of our system so that we can efficiently query it later.&lt;/div&gt;&lt;h4&gt;Modification&lt;/h4&gt;&lt;div&gt;In this phase, we query the enriched layer and decide what actions need to be generated in order to get the block device to a desired state. The user must then approve the suggested changes or delegate the program to decide whether they are executed or refused.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;During this phase, we can perform some pre-flight checks to determine whether modifying the system is actually feasible. For example, you cannot format a device that already has a file system or we cannot mount a device to directory that doesn&#39;t exist&lt;/div&gt;&lt;h4&gt;Validation&lt;/h4&gt;&lt;div&gt;After modifications are performed (if any), then we enrich the layer once again and then confirm whether the devices are in the desired state. This is necessary as the layers are dependent on the successful validation of the one above it (e.g Devices cannot be labelled, until they have a valid file system)&lt;/div&gt;" style="text;html=1;strokeColor=none;fillColor=none;spacing=5;spacingTop=-20;whiteSpace=wrap;overflow=hidden;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="425" y="600" width="320" height="560" as="geometry" />
        </mxCell>
        <mxCell id="G81cnE-LIEM_Ek7taha4-131" value="&lt;h2 style=&quot;border-color: var(--border-color);&quot;&gt;&lt;font style=&quot;border-color: var(--border-color); font-size: 16px;&quot;&gt;Backend&lt;/font&gt;&lt;/h2&gt;&lt;h2&gt;&lt;div style=&quot;border-color: var(--border-color); font-size: 12px; font-weight: 400;&quot;&gt;Backends provide an in-memory representation of a sub-section of our system. For example the FileBackend provides a data view of specific files in our file system and the DeviceBackend provides a data view of specific block devices attached to our system.&lt;/div&gt;&lt;div style=&quot;border-color: var(--border-color); font-size: 12px; font-weight: 400;&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div style=&quot;border-color: var(--border-color); font-size: 12px; font-weight: 400;&quot;&gt;Backends only possess the ability to query the system and suggest Actions. It is outside its responsibility to execute these actions.&lt;/div&gt;&lt;/h2&gt;" style="text;html=1;strokeColor=none;fillColor=none;spacing=5;spacingTop=-20;whiteSpace=wrap;overflow=hidden;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="800" y="600" width="320" height="180" as="geometry" />
        </mxCell>
        <mxCell id="G81cnE-LIEM_Ek7taha4-132" value="&lt;h2 style=&quot;border-color: var(--border-color);&quot;&gt;&lt;font style=&quot;border-color: var(--border-color); font-size: 16px;&quot;&gt;Service&lt;/font&gt;&lt;/h2&gt;&lt;h2&gt;&lt;div style=&quot;border-color: var(--border-color); font-size: 12px;&quot;&gt;All queries and modifications to the system&lt;span style=&quot;font-weight: 400;&quot;&gt; are performed at the Service level. Certain services cannot get the information they require through standard libraries, so they delegate that work to C-based utilities that are pre-installed on most Linux distros.&amp;nbsp;&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;border-color: var(--border-color); font-size: 12px;&quot;&gt;&lt;span style=&quot;font-weight: 400;&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;border-color: var(--border-color); font-size: 12px;&quot;&gt;&lt;span style=&quot;font-weight: 400;&quot;&gt;These C-based utilities are invoked through Runners that correspond to a specific Binary&lt;/span&gt;&lt;/div&gt;&lt;/h2&gt;" style="text;html=1;strokeColor=none;fillColor=none;spacing=5;spacingTop=-20;whiteSpace=wrap;overflow=hidden;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="800" y="800" width="320" height="190" as="geometry" />
        </mxCell>
        <mxCell id="G81cnE-LIEM_Ek7taha4-141" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;endArrow=open;endFill=0;dashed=1;" edge="1" parent="1" source="G81cnE-LIEM_Ek7taha4-133" target="G81cnE-LIEM_Ek7taha4-140">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="G81cnE-LIEM_Ek7taha4-144" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;endArrow=diamond;endFill=0;" edge="1" parent="1" source="G81cnE-LIEM_Ek7taha4-133" target="G81cnE-LIEM_Ek7taha4-136">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1470" y="275" />
              <mxPoint x="1470" y="430" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="G81cnE-LIEM_Ek7taha4-133" value="RunnerFactory" style="swimlane;fontStyle=0;childLayout=stackLayout;horizontal=1;startSize=30;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="1260" y="245" width="140" height="60" as="geometry">
            <mxRectangle x="540" y="450" width="70" height="30" as="alternateBounds" />
          </mxGeometry>
        </mxCell>
        <mxCell id="G81cnE-LIEM_Ek7taha4-134" value="Select(b: Binary): Runner" style="text;strokeColor=none;fillColor=#FFFFFF;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" vertex="1" parent="G81cnE-LIEM_Ek7taha4-133">
          <mxGeometry y="30" width="140" height="30" as="geometry" />
        </mxCell>
        <mxCell id="G81cnE-LIEM_Ek7taha4-142" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;endArrow=open;endFill=0;" edge="1" parent="1" source="G81cnE-LIEM_Ek7taha4-136" target="G81cnE-LIEM_Ek7taha4-140">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="G81cnE-LIEM_Ek7taha4-136" value="Runner" style="swimlane;fontStyle=0;childLayout=stackLayout;horizontal=1;startSize=30;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="1260" y="400" width="140" height="60" as="geometry">
            <mxRectangle x="540" y="450" width="70" height="30" as="alternateBounds" />
          </mxGeometry>
        </mxCell>
        <mxCell id="G81cnE-LIEM_Ek7taha4-137" value="Command(...): error" style="text;strokeColor=none;fillColor=#FFFFFF;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" vertex="1" parent="G81cnE-LIEM_Ek7taha4-136">
          <mxGeometry y="30" width="140" height="30" as="geometry" />
        </mxCell>
        <mxCell id="G81cnE-LIEM_Ek7taha4-138" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="G81cnE-LIEM_Ek7taha4-57" target="G81cnE-LIEM_Ek7taha4-133">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1220" y="275" />
              <mxPoint x="1220" y="275" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="G81cnE-LIEM_Ek7taha4-140" value="Binary" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="1280" y="340" width="100" height="30" as="geometry" />
        </mxCell>
        <mxCell id="G81cnE-LIEM_Ek7taha4-145" value="&lt;h2 style=&quot;border-color: var(--border-color);&quot;&gt;&lt;font style=&quot;border-color: var(--border-color); font-size: 16px;&quot;&gt;Binary&lt;/font&gt;&lt;/h2&gt;&lt;h2 style=&quot;border-color: var(--border-color);&quot;&gt;&lt;div style=&quot;border-color: var(--border-color); font-size: 12px; font-weight: 400;&quot;&gt;Binaries are enums that ensure that we only invoke approved commands. They are a great tool to visualise the external dependencies of this program&lt;/div&gt;&lt;/h2&gt;&lt;h2 style=&quot;border-color: var(--border-color);&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;Runner&lt;/span&gt;&lt;/h2&gt;&lt;h2 style=&quot;border-color: var(--border-color);&quot;&gt;&lt;div style=&quot;border-color: var(--border-color); font-size: 12px; font-weight: 400;&quot;&gt;Runners provide a shell mechanism for this program to invoke C-based utilities that are pre-installed on most Linux distros. Runners also contain logic to validate whether they are actually installed on the system.&lt;br&gt;&lt;/div&gt;&lt;/h2&gt;&lt;h2 style=&quot;border-color: var(--border-color);&quot;&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;RunnerFactory&lt;/font&gt;&lt;/h2&gt;&lt;h2 style=&quot;border-color: var(--border-color);&quot;&gt;&lt;div style=&quot;border-color: var(--border-color); font-size: 12px; font-weight: 400;&quot;&gt;&lt;/div&gt;&lt;div style=&quot;border-color: var(--border-color); font-size: 12px;&quot;&gt;&lt;span style=&quot;font-weight: 400;&quot;&gt;Possesses logic to ensure that Runners are instantiated on an &lt;/span&gt;as-needs&lt;span style=&quot;font-weight: normal;&quot;&gt;&amp;nbsp;basis and then cached for future use. This is to ensure that we are not constantly validating the accessibility of the underlying Binary&lt;/span&gt;&lt;/div&gt;&lt;/h2&gt;&lt;h2 style=&quot;border-color: var(--border-color);&quot;&gt;&lt;div style=&quot;border-color: var(--border-color); font-size: 12px; font-weight: 400;&quot;&gt;&lt;br style=&quot;border-color: var(--border-color);&quot;&gt;&lt;/div&gt;&lt;/h2&gt;&lt;h2 style=&quot;border-color: var(--border-color);&quot;&gt;&lt;div style=&quot;border-color: var(--border-color); font-size: 12px; font-weight: 400;&quot;&gt;&lt;/div&gt;&lt;div style=&quot;border-color: var(--border-color); font-size: 12px; font-weight: 400;&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;/h2&gt;" style="text;html=1;strokeColor=none;fillColor=none;spacing=5;spacingTop=-20;whiteSpace=wrap;overflow=hidden;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="1160" y="600" width="320" height="340" as="geometry" />
        </mxCell>
        <mxCell id="G81cnE-LIEM_Ek7taha4-147" value="&lt;h2 style=&quot;border-color: var(--border-color);&quot;&gt;&lt;font style=&quot;border-color: var(--border-color); font-size: 16px;&quot;&gt;Action&lt;/font&gt;&lt;/h2&gt;&lt;h2&gt;&lt;div style=&quot;border-color: var(--border-color); font-size: 12px; font-weight: 400;&quot;&gt;Actions provide a mechanism to package up all the information required to perform a specific modification to a system. This is fundamentally required as we may occasionally desire to stage modifications behind a human approval gate&lt;/div&gt;&lt;div style=&quot;border-color: var(--border-color); font-size: 12px; font-weight: 400;&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div style=&quot;border-color: var(--border-color); font-size: 12px; font-weight: 400;&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;/h2&gt;" style="text;html=1;strokeColor=none;fillColor=none;spacing=5;spacingTop=-20;whiteSpace=wrap;overflow=hidden;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="800" y="980" width="320" height="110" as="geometry" />
        </mxCell>
        <mxCell id="G81cnE-LIEM_Ek7taha4-148" value="&lt;h2 style=&quot;border-color: var(--border-color);&quot;&gt;&lt;font style=&quot;border-color: var(--border-color); font-size: 16px;&quot;&gt;Mode&lt;/font&gt;&lt;/h2&gt;&lt;h2&gt;&lt;/h2&gt;&lt;h3 style=&quot;border-color: var(--border-color);&quot;&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;&lt;font style=&quot;font-size: 12px;&quot;&gt;Healthcheck&lt;/font&gt;&lt;/span&gt;&lt;/h3&gt;&lt;h2&gt;&lt;div style=&quot;border-color: var(--border-color); font-size: 12px;&quot;&gt;&lt;div style=&quot;border-color: var(--border-color);&quot;&gt;&lt;span style=&quot;font-weight: 400;&quot;&gt;A mode that ensures that an action is &lt;/span&gt;never executed &lt;span style=&quot;font-weight: 400;&quot;&gt;and causes the program to exit early. This mode ensures the program can run in a hardened state where block devices are validated against a Config and any detected actions imply that system is not in the desired state.&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-weight: 400; border-color: var(--border-color);&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div style=&quot;border-color: var(--border-color);&quot;&gt;&lt;span style=&quot;font-weight: 400;&quot;&gt;This mode will be the only mode that we &lt;/span&gt;recommend&lt;span style=&quot;font-weight: 400;&quot;&gt; for common usage. It is a way of protecting us from liability&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/h2&gt;&lt;h3 style=&quot;border-color: var(--border-color);&quot;&gt;Prompt&amp;nbsp;&lt;/h3&gt;&lt;h2 style=&quot;border-color: var(--border-color);&quot;&gt;&lt;div style=&quot;border-color: var(--border-color); font-size: 12px; font-weight: 400;&quot;&gt;&lt;div style=&quot;border-color: var(--border-color);&quot;&gt;A mode that ensures that an Action must require human approval before it is executed. It is a great way of permitting changes to a system in a controlled manner.&lt;/div&gt;&lt;/div&gt;&lt;/h2&gt;&lt;h3 style=&quot;border-color: var(--border-color);&quot;&gt;Force&lt;/h3&gt;&lt;h2 style=&quot;border-color: var(--border-color);&quot;&gt;&lt;div style=&quot;border-color: var(--border-color); font-size: 12px; font-weight: 400;&quot;&gt;&lt;div style=&quot;border-color: var(--border-color);&quot;&gt;&lt;/div&gt;&lt;/div&gt;&lt;/h2&gt;&lt;h2 style=&quot;border-color: var(--border-color);&quot;&gt;&lt;div style=&quot;border-color: var(--border-color); font-size: 12px;&quot;&gt;&lt;div style=&quot;border-color: var(--border-color);&quot;&gt;&lt;span style=&quot;font-weight: 400;&quot;&gt;A mode where we put ultimate trust in the programs ability to decide whether an action is sensible to execute. Despite the naming, the program will operate&amp;nbsp;&lt;/span&gt;conservatively&lt;span style=&quot;font-weight: 400;&quot;&gt;, avoiding certain destructive operations like formatting existing file systems.&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/h2&gt;&lt;h2&gt;&lt;div style=&quot;border-color: var(--border-color); font-size: 12px; font-weight: 400;&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;/h2&gt;" style="text;html=1;strokeColor=none;fillColor=none;spacing=5;spacingTop=-20;whiteSpace=wrap;overflow=hidden;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="40" y="950" width="320" height="420" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
